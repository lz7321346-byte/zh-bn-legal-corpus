# 问题修复说明

## 问题 1：/corpus 页面显示 404

### 原因
在 Next.js App Router 中，`(corpus)` 是一个路由组（route group），括号内的文件夹名不会出现在 URL 中。所以 `app/(corpus)/page.tsx` 实际上映射到根路径 `/`，而不是 `/corpus`。

### 修复
已创建 `frontend/app/corpus/page.tsx`，现在 `/corpus` 路由应该可以正常访问。

### 验证
访问 http://localhost:3000/corpus 应该能看到平行语料库页面。

## 问题 2：搜索"宪法"失败

### 可能的原因
1. **后端服务未运行** - 最常见的原因
2. **API 代理配置问题** - Next.js 的 rewrites 配置
3. **CORS 问题** - 后端未允许前端域名

### 修复步骤

#### 1. 确保后端服务正在运行

在项目根目录执行：
```powershell
# 进入项目目录
cd "C:\Users\周科伽、\Desktop\zh-bn-legal-corpus-main"

# 激活虚拟环境
& .\.venv\Scripts\Activate.ps1

# 启动服务
uvicorn backend.app.main:app --host 127.0.0.1 --port 8000 --reload
```

#### 2. 验证后端服务

在浏览器中访问：
- http://127.0.0.1:8000 - 应该显示服务信息
- http://127.0.0.1:8000/docs - 应该显示 API 文档
- http://127.0.0.1:8000/api/v1/terms?q=宪法 - 应该返回"宪法"的数据

#### 3. 检查前端 API 代理

`frontend/next.config.js` 中已配置：
```javascript
async rewrites() {
  return [
    {
      source: '/api/:path*',
      destination: 'http://127.0.0.1:8000/api/:path*',
    },
  ];
}
```

这应该能正确代理 `/api/v1/terms` 到后端。

#### 4. 检查浏览器控制台

打开浏览器开发者工具（F12），查看：
- Network 标签：检查 `/api/v1/terms?q=宪法` 请求的状态
- Console 标签：查看是否有错误信息

### 数据验证

`backend/data/terms.json` 中已包含"宪法"的完整数据，包括：
- 定义（中文、英文、孟加拉语）
- 3个用法示例
- 上下文信息
- 来源和条目信息

## 测试步骤

1. **启动后端服务**（在项目根目录）：
   ```powershell
   & .\.venv\Scripts\Activate.ps1
   uvicorn backend.app.main:app --host 127.0.0.1 --port 8000 --reload
   ```

2. **启动前端服务**（在 frontend 目录）：
   ```powershell
   cd frontend
   npm run dev
   ```

3. **测试搜索**：
   - 访问 http://localhost:3000/terms
   - 在搜索框输入"宪法"
   - 点击"搜索"
   - 应该显示"宪法"的完整信息

4. **测试语料库**：
   - 访问 http://localhost:3000/corpus
   - 应该能看到平行语料库搜索页面

## 如果仍然失败

### 检查后端服务
```powershell
# 测试后端 API
curl http://127.0.0.1:8000/api/v1/terms?q=宪法
```

### 检查前端代理
在浏览器中访问：
- http://localhost:3000/api/v1/terms?q=宪法
- 应该返回 JSON 数据

### 检查 CORS 配置
确保 `backend/app/config.py` 中的 `cors_origins` 包含 `http://localhost:3000`

