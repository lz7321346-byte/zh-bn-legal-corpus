# 启动前端服务 - 简单步骤

## 前置条件

在启动前端服务之前，请确保：

1. **后端服务已启动**（http://127.0.0.1:8000）
2. **Node.js 已安装**（检查：`node --version`）
3. **npm 已安装**（检查：`npm --version`）

## 启动步骤

### 方法 1：使用 npm（推荐）

1. **打开 PowerShell 或命令提示符**

2. **进入前端目录**：
   ```powershell
   cd "C:\Users\周科伽、\Desktop\zh-bn-legal-corpus-main\frontend"
   ```

3. **安装依赖**（如果还没有安装）：
   ```powershell
   npm install
   ```
   > 注意：如果 `node_modules` 目录已存在且依赖已安装，可以跳过此步骤。

4. **启动开发服务器**：
   ```powershell
   npm run dev
   ```

### 方法 2：使用 PowerShell 脚本

如果项目根目录有前端启动脚本，可以直接运行。

## 验证服务是否启动成功

启动成功后，您应该看到类似以下输出：

```
  ▲ Next.js 14.2.4
  - Local:        http://localhost:3000
  - Environments: .env.local

  ✓ Ready in 2.3s
```

然后您可以：

1. **访问首页**：http://localhost:3000
2. **访问在线词典**：http://localhost:3000/terms
3. **访问平行语料库**：http://localhost:3000/corpus
4. **访问数据上传**：http://localhost:3000/upload

## 常见问题

### 问题 1：`npm` 命令未找到

**原因**：Node.js 未安装或未添加到 PATH

**解决**：
1. 下载并安装 Node.js：https://nodejs.org/
2. 安装完成后，重新打开 PowerShell
3. 验证安装：`node --version` 和 `npm --version`

### 问题 2：端口 3000 已被占用

**错误信息**：`Port 3000 is already in use`

**解决**：
- 关闭占用端口的程序，或
- 使用其他端口：`npm run dev -- -p 3001`
- 然后访问：http://localhost:3001

### 问题 3：依赖安装失败

**错误信息**：`npm ERR!` 或 `Module not found`

**解决**：
```powershell
# 删除 node_modules 和 package-lock.json
Remove-Item -Recurse -Force node_modules
Remove-Item -Force package-lock.json

# 重新安装依赖
npm install
```

### 问题 4：前端无法连接到后端

**错误信息**：`术语查询服务暂时不可用` 或 `Failed to fetch`

**解决**：
1. 确保后端服务正在运行（http://127.0.0.1:8000）
2. 检查后端服务是否正常：访问 http://127.0.0.1:8000/docs
3. 检查 `frontend/next.config.js` 中的代理配置是否正确

### 问题 5：页面显示 404

**原因**：路由配置问题或页面文件不存在

**解决**：
- 确保所有页面文件存在：
  - `frontend/app/page.tsx`（首页）
  - `frontend/app/terms/page.tsx`（在线词典）
  - `frontend/app/corpus/page.tsx`（平行语料库）
  - `frontend/app/upload/page.tsx`（数据上传）

## 停止服务

在运行服务的 PowerShell 窗口中按 `Ctrl+C`

## 完整启动流程

### 1. 启动后端服务（第一个终端窗口）

```powershell
# 进入项目根目录
cd "C:\Users\周科伽、\Desktop\zh-bn-legal-corpus-main"

# 激活虚拟环境
& .\.venv\Scripts\Activate.ps1

# 启动后端服务
uvicorn backend.app.main:app --host 127.0.0.1 --port 8000 --reload
```

### 2. 启动前端服务（第二个终端窗口）

```powershell
# 进入前端目录
cd "C:\Users\周科伽、\Desktop\zh-bn-legal-corpus-main\frontend"

# 启动前端服务
npm run dev
```

### 3. 访问应用

- 前端：http://localhost:3000
- 后端 API 文档：http://127.0.0.1:8000/docs

## 开发模式说明

- **热重载**：修改代码后，页面会自动刷新
- **错误提示**：代码错误会在浏览器中显示
- **API 代理**：前端会自动将 `/api/*` 请求代理到后端

## 生产环境构建

如果需要构建生产版本：

```powershell
# 构建
npm run build

# 启动生产服务器
npm run start
```

